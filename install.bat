@echo off
chcp 65001 >nul
echo.
echo ========================================================
echo üèãÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã —É—á—ë—Ç–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π —Ç—Ä–µ–Ω–∞–∂—ë—Ä–Ω–æ–≥–æ –∑–∞–ª–∞
echo ========================================================
echo.

REM Check if Node.js is installed
where node >nul 2>nul
if %ERRORLEVEL% NEQ 0 (
    echo ‚ùå Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
    echo.
    echo –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js —Å https://nodejs.org/
    echo –í—ã–±–µ—Ä–∏—Ç–µ LTS –≤–µ—Ä—Å–∏—é –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
    echo.
    pause
    exit /b 1
)

echo ‚úÖ Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
node --version
echo.

REM Install dependencies
echo üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
echo –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç...
echo.
call npm install
if %ERRORLEVEL% NEQ 0 (
    echo.
    echo ‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!
    echo.
    echo –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
    echo   1. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à: npm cache clean --force
    echo   2. –£–¥–∞–ª–∏—Ç—å node_modules: rmdir /s /q node_modules
    echo   3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞: install.bat
    echo.
    pause
    exit /b 1
)

echo.
echo ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
echo.

REM Initialize database
echo üóÑÔ∏è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
call npm run init-db
if %ERRORLEVEL% NEQ 0 (
    echo.
    echo ‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö!
    echo.
    pause
    exit /b 1
)

echo.
echo ========================================================
echo ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
echo ========================================================
echo.
echo üìã –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
echo    –õ–æ–≥–∏–Ω: admin
echo    –ü–∞—Ä–æ–ª—å: admin123
echo.
echo üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
echo    npm run dev
echo.
echo    –∏–ª–∏ –¥–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ñ–∞–π–ª: start.bat
echo.
echo üåê –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
echo    ‚Ä¢ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: http://localhost:3000
echo    ‚Ä¢ –°–∫–∞–Ω–µ—Ä QR: http://localhost:3000/scanner
echo    ‚Ä¢ API: http://localhost:3001/api
echo.
echo üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: WINDOWS_SETUP.md
echo ========================================================
echo.
pause
